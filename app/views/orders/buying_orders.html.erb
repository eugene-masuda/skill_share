<section class="section">
    <div class="container">
        <p class="title">Buying Orders</p>

        <table class="table is-fullwidth">
            <thead>
                <tr>
                    <th>日付</th>
                    <th>購入者</th>
                    <th>タイトル</th>
                    <th>支払い期日</th>
                    <th>料金</th>
                    <th>状況</th>
                    <th>アクション</th>
                </tr>
            </thead>
            <tbody>
                <% if @orders.blank? %>
                  <tr>
                      <td colspan="7" class="has-text-centered"><h1>オーダーはありません</h1></td>
                  </tr>
                <% end %>
                <% @orders.each do |o| %>
                    <tr>
                        <td><%= o.created_at.strftime('%d %b %Y') %></td>
                        <td><%= o.seller_name %></td>
                        <td>
                          <%= link_to o.title, gig_path(o.gig) if !o.gig.nil? %>
                          <%= link_to o.title, request_path(o.request) if !o.request.nil? %>
                        </td>
                        <td><%= o.due_date.strftime('%d %b %Y') %></td>
                        <td><%= o.amount %></td>
                        <td>
                            <span class="tag <%= 'is-warning' if o.inprogress? %> <%= 'is-success' if o.completed? %>">
                                <%= o.status.capitalize %>
                            </span>
                        </td>
                        <td>
                            <%= link_to 'Mark Complete', complete_order_path(o), method: :put, class: "button is-small is-primary #{'is-hidden' if o.completed?}" %>
                        </td>
                    </tr>
                <% end %>
            </tbody>
        </table>

    </div>
</section>